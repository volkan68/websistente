<!DOCTYPE html>
<html lang="es" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Usando PHP en Heroku - Websistente</title>
  <meta name="description" content="Aunque muchos no lo saben y Heroku no lo publicita es posible desplegar aplicaciones PHP o Perl en el servicio PaaS de Heroku. Claro que hay algunas limitaciones, la primera es que MySQL no es la base de datos relacional que ofrece la plataforma, sino que los es PostgreSQL. Esto hace que algunas muy populares webapps como WordPress por ejemplo no puedan ser deplegadas directamente en Heroku y tal vez es la razón por la cual no se publicita mucho el soporte a PHP."><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Websistente",
    
    "url": "http:\/\/websistente.com\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "http:\/\/websistente.com\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "http:\/\/websistente.com\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "http:\/\/websistente.com\/posts\/2013-07-19-usando-php-en-heroku\/",
          "name": "Usando php en heroku"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "volkan68"
  },
  "headline": "Usando PHP en Heroku",
  "description" : "Aunque muchos no lo saben y Heroku no lo publicita es posible desplegar aplicaciones PHP o Perl en el servicio PaaS de Heroku. Claro que hay algunas limitaciones, la primera es que MySQL no es la base de datos relacional que ofrece la plataforma, sino que los es PostgreSQL. Esto hace que algunas muy populares webapps como WordPress por ejemplo no puedan ser deplegadas directamente en Heroku y tal vez es la razón por la cual no se publicita mucho el soporte a PHP.",
  "inLanguage" : "es",
  "wordCount":  647 ,
  "datePublished" : "2013-07-19T10:56:44",
  "dateModified" : "2013-07-19T10:56:44",
  "image" : "http:\/\/websistente.com\/",
  "keywords" : [ "" ],
  "mainEntityOfPage" : "http:\/\/websistente.com\/posts\/2013-07-19-usando-php-en-heroku\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "http:\/\/websistente.com\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "http:\/\/websistente.com\/",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Usando PHP en Heroku" />
<meta property="og:description" content="Aunque muchos no lo saben y Heroku no lo publicita es posible desplegar aplicaciones PHP o Perl en el servicio PaaS de Heroku. Claro que hay algunas limitaciones, la primera es que MySQL no es la base de datos relacional que ofrece la plataforma, sino que los es PostgreSQL. Esto hace que algunas muy populares webapps como WordPress por ejemplo no puedan ser deplegadas directamente en Heroku y tal vez es la razón por la cual no se publicita mucho el soporte a PHP.">
<meta property="og:url" content="http://websistente.com/posts/2013-07-19-usando-php-en-heroku/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Websistente" />

  <meta name="twitter:title" content="Usando PHP en Heroku" />
  <meta name="twitter:description" content="Aunque muchos no lo saben y Heroku no lo publicita es posible desplegar aplicaciones PHP o Perl en el servicio PaaS de Heroku. Claro que hay algunas limitaciones, la primera es que MySQL no es la base …">
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.92.1" />
  <link rel="alternate" href="http://websistente.com/index.xml" type="application/rss+xml" title="Websistente"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="http://websistente.com/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="http://websistente.com/css/syntax.css" /><link rel="stylesheet" href="http://websistente.com/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Conmuta navegación</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://websistente.com/">Websistente</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Podcast" href="/podcast">Podcast</a>
            </li>
          
        
          
            <li>
              <a title="Autor" href="/volkan-rivera">Autor</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>Usando PHP en Heroku</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>Aunque muchos no lo saben y <a href="http://heroku.com">Heroku</a> no lo publicita es posible desplegar aplicaciones <strong>PHP</strong> o <strong>Perl</strong> en el servicio <a href="http://es.wikipedia.org/wiki/Computaci%C3%B3n_en_la_nube#Plataforma_como_servicio">PaaS</a> de Heroku. Claro que hay algunas limitaciones, la primera es que MySQL no es la base de datos relacional que ofrece la plataforma, sino que los es PostgreSQL. Esto hace que algunas muy populares webapps como WordPress por ejemplo no puedan ser deplegadas directamente en Heroku y tal vez es la razón por la cual no se publicita mucho el soporte a PHP. En este muy breve tutorial explicaremos como tener una aplicación PHP con base de datos PostgreSQL corriendo en Heroku.</p>
<p>Primero, estamos asumiendo que Ud. ya tiene una cuenta en Heroku (son gratuitas, puede <a href="https://id.heroku.com/signup">registrarse aquí</a>) y que tiene el <a href="https://toolbelt.heroku.com/">Toolbelt</a> instalado en su máquina de desarrollo que asumimos es un entorno Unix/Linux. Si estos dos requerimientos ya están satisfechos comencemos.</p>
<p>Creemos un directorio en donde podremos el código de nuestra aplicación:</p>
<p><strong><span style="font-family:courier new,courier,monospace;">mkdir TestHeroku</span></strong></p>
<p><strong><span style="font-family:courier new,courier,monospace;">cd TestHeroku</span></strong></p>
<p>Una vez dentro de dicho directorio usando su editor de texto favorito (pico, nano, vi, vim, emacs) cree un archivo <span style="font-family:courier new,courier,monospace;"><strong>index.php</strong></span> con este código:</p>
<p><strong><span style="font-family:courier new,courier,monospace;">&lt;?php</span></strong></p>
<p><strong><span style="font-family:courier new,courier,monospace;">$conn_string = &ldquo;&quot;;</span></strong></p>
<p><strong><span style="font-family:courier new,courier,monospace;">$dbconn = pg_connect($conn_string)<br>
or die(&lsquo;No puedo conectarme: ' . pg_last_error());</span></strong></p>
<p><strong><span style="font-family:courier new,courier,monospace;">echo &ldquo;Conectado a la Base de Datos!&quot;;</span></strong></p>
<p><strong><span style="font-family:courier new,courier,monospace;">?&gt;</span></strong></p>
<p>Se habran dado cuenta de que la cadena de conexión está en blanco, esto es debido a que debemos obtener esta información desde Heroku.</p>
<p>Ahora que ya tenemos creado el código de nuestra aplicación mínima, procedemos a crear el repositorio git, agregar el código que hemos creado a él, para ello son necesarios los siguientes pasos:</p>
<p><strong><span style="font-family:courier new,courier,monospace;">git init</span></strong></p>
<p><strong><span style="font-family:courier new,courier,monospace;">git add .</span></strong></p>
<p><strong><span style="font-family:courier new,courier,monospace;">git commit -m &ldquo;Aplicación básica PHP con acceso a DB&rdquo;</span></strong></p>
<p>Hasta aquí está listo todo lo que necesitamos para poder comenzar a desplegar nuestro código en Heroku, ahora vienen dos pasos cruciales, el primero es crear nuestra aplicación en Heroku y el segundo es conseguir las credenciales para poder acceder nuestra DB. Para crear nuestra aplicación sólo debemos ejecutar este comando:</p>
<p><span style="font-family:courier new,courier,monospace;"><strong>heroku create</strong></span></p>
<p>Para obtener las credenciales de nuestra DB, primero hay que añadir el addon de soporte de PostgreSQL gratuito (la versión para desarrolladores) y luego preguntar por las credenciales, para ello ejecutamos estos dos comandos:</p>
<p><span style="font-family:courier new,courier,monospace;"><strong>user@desktop:~/PHP/TestHeroku$ <span style="color:#0000FF;">heroku addons:add heroku-postgresql:dev</span><br>
Adding heroku-postgresql:dev on shielded-lake-3567… done, v4 (free)<br>
Attached as HEROKU_POSTGRESQL_NAVY_URL<br>
Database has been created and is available<br>
! This database is empty. If upgrading, you can transfer<br>
! data from another database with pgbackups:restore.<br>
Use <code>heroku addons:docs heroku-postgresql:dev</code> to view documentation.</strong></span></p>
<p><span style="font-family:courier new,courier,monospace;"><strong>user@desktop:~/PHP/TestHeroku$ <span style="color:#0000FF;">heroku pg:credentials NAVY</span><br>
Connection info string:<br>
&ldquo;<span style="color:#FF0000;">dbname=d49jgofa4ihhd1 host=ec2-45-152-86-231.compute-1.amazonaws.com port=5432 user=tbejgilawfitui password=43212UU2sdffEEW0dfQcYh8tP8fS sslmode=require</span>&rdquo;<br>
Connection URL:<br>
postgres://tbejgilawfitui:0QH82ZO2MWIuk0dfQcYh8tP8fS@ec2-54-225-68-241.compute-1.amazonaws.com:5432/d49jgofa4ihhd1</strong></span></p>
<p>Observer que en estas capturas de pantalla, la información que Ud. debe tipear está en <strong><span style="color:#0000FF;">azul</span></strong> y la información que necesitamos para completar nuestro código está en <span style="color:#FF0000;"><strong>rojo</strong></span>. Copie la información que Ud. obtiene en su terminal y edite el código del archivo index.php para que quede de esta manera:</p>
<p><span style="font-family:courier new,courier,monospace;"><strong>&lt;?php</strong></span></p>
<p><span style="font-family:courier new,courier,monospace;"><strong>$conn_string = &ldquo;</strong></span><strong><span style="color: rgb(255, 0, 0);">dbname=d49jgofa4ihhd1 host=ec2-45-152-86-231.compute-1.amazonaws.com port=5432 user=tbejgilawfitui password=43212UU2sdffEEW0dfQcYh8tP8fS sslmode=require</span></strong><span style="font-family:courier new,courier,monospace;"><strong>&quot;;</strong></span></p>
<p><span style="font-family:courier new,courier,monospace;"><strong>$dbconn = pg_connect($conn_string)<br>
or die(&lsquo;Could not connect: ' . pg_last_error());</strong></span></p>
<p><span style="font-family:courier new,courier,monospace;"><strong>echo &ldquo;Connected to the DB&rdquo;;</strong></span></p>
<p><span style="font-family:courier new,courier,monospace;"><strong>?&gt;</strong></span></p>
<p>Ahora estamos listos para hacer un último commit y subir nuestra aplicación a Heroku haciendo esto:</p>
<p><span style="font-family:courier new,courier,monospace;"><strong>git add .</strong></span></p>
<p><span style="font-family:courier new,courier,monospace;"><strong>git commit -m &ldquo;Credenciales de DB incluídas&rdquo;</strong></span></p>
<p><span style="font-family:courier new,courier,monospace;"><strong>git push heroku master</strong></span></p>
<p>Ahora ya podemos ver el resultado de nuestra aplicación visitando el URL de la misma en Heroku. Por lo general los URL de las applicaciones de Heroku se parecen a este:</p>
<p><a href="http://shielded-lake-3567.herokuapp.com/">http://shielded-lake-3567.herokuapp.com/</a></p>
<p>Si no saben cual es el nombre de su aplicación, ni el URL para accesarlo y no desean loguearse a la interface web para averiguarlo, sólo ejecuten este comando dentro del directorio que contiene su aplicación para obtener dicha información:</p>
<p><span style="font-family:courier new,courier,monospace;"><strong>user@desktop:~/PHP/TestHeroku$ <span style="color:#0000FF;">heroku apps:info</span><br>
=== shielded-lake-3567<br>
Addons: heroku-postgresql:dev<br>
Git URL: <a href="mailto:git@heroku.com">git@heroku.com</a>:shielded-lake-3567.git<br>
Owner Email: <a href="mailto:user@domain.com">user@domain.com</a><br>
Region: us<br>
Repo Size: 192k<br>
Slug Size: 9M<br>
Stack: cedar<br>
Tier: Legacy<br>
Web URL: <span style="color:#FF0000;"><a href="http://shielded-lake-3567.herokuapp.com/">http://shielded-lake-3567.herokuapp.com/</a></span></strong></span></p>
<p>Espero que este breve tutorial les haya sido de utilidad y quedo a la espera de sus comentarios.</p>


        

        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="http://websistente.com/posts/2013-05-30-una-introduccion-a-la-virtualizacion/" data-toggle="tooltip" data-placement="top" title="Una introducción a la virtualización">&larr; Artículo anterior</a>
            </li>
          
          
            <li class="next">
              <a href="http://websistente.com/posts/2013-09-17-comandos-basicos-para-controlar-exim/" data-toggle="tooltip" data-placement="top" title="Comandos básicos para controlar Exim">Artículo siguiente &rarr;</a>
            </li>
          
        </ul>
      


      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2014
          

          
            &nbsp;&bull;&nbsp;
            <a href="http://websistente.com/">Websistente</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.92.1</a> alimentada &nbsp;&bull;&nbsp; Tema <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adaptado de <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="http://websistente.com/js/main.js"></script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="http://websistente.com/js/load-photoswipe.js"></script>









    
  </body>
</html>

